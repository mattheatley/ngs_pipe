READ ME (TBC)

This software helps facilitate the processing of ngs data on a SLURM cluster according to parameters commonly used by Levi Yant's lab.


Requirements
  
  - python 3.7.3; os, sys, operator, time, argparse, subprocess, re, collections, statistics, itertools
  - trimmomatic 0.39
  - picard 2.21.1
  - bwa 0.7.17
  - samtools 1.9
  - gatk4 4.1.4.0
  - vcftools 0.1.16



SETUP

Create the initial working directory (default: $HOME/ngs_pipe) & sub-directories.

  python pipe_ngs.py -setup [-p </path/to>] [-d <directory_name>]



PREPARE FILES

Move input files to the relevant sub-directories as follows:

  /ref.gen
    genome.fasta
    
  /00.fastqs
    /Sample_1
      Reads_1.fastq.gz
      Reads_2.fastq.gz
    /Sample_2
      Reads.fastq.gz
      ...



INDEX

Index reference genome.

  python pipe_ngs.py -index



PROCESS DATA

Sequentially processes ngs data.

  python pipe_ngs.py -stage <number> [-x <ploidy>]


  Stage   Description

  1       Merge fastqs
  2       Trim reads
  3       Map reads
  4       Mark duplicates
  5       Call haplotypes
  6       Combine sample
  7       Genotype samples
  8       Re-combine parts
  9       Filter sites
  10      Filter depth



ADDITIONAL SETTINGS

  Flag                Description

  -pa <partition>       specify SLURM partition
  -no <nodes>           specify SLURM nodes
  -nt <ntasks>          specify SLURM ntasks
  -me <memory[units]>   specify SLURM memory
  -wt <HH:MM:SS>        specify SLURM walltime
 
  -review               review SLURM accounting data for tasks (i.e. -stage <number> -review)

  -sb                   activate Sub Buddy; automatically re-submits any tasks stuck with 'failed' in NODELIST(REASON) 
  
  
  
